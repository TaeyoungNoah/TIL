# 인터넷 네트워크

### 인터넷 통신

클라이언트 -  인터넷 - 서버

위 구조로 이루어져있어서 클라이언트에서 서버로 정보를 보낼 때 인터넷을 이용해야함

인터넷을 거치는 과정은 굉장히 복잡한데 이 내용을 이해하기 위해선 IP에 대한  공부가 선행되어야 함



***



### IP(인터넷 프로토콜)

위에서 말한 클라이언트와 서버간의 정보를 전송하려면 IP라는 것을 부여받아야함

*클라이언트 IP : 100.100.100.1*

*서         버  IP : 200.200.200.2*

라고 가정하자



#### [IP의 역할]

- 지정한 IP 주소(IP Adress)에 데이터 전달
- 패킷(Packet)이라는 통신 단위로 데이터 전달 (규칙 같은 것)

> (클라이언트 → 서버) & (서버 → 클라이언트)
>
> 출발지 IP, 목적지 IP ... 로 **패킷을 만들어**서 인터넷망에 던지고, 인터넷 사이에서 목적지 IP를 찾아서 가게 됨



#### [IP 프로토콜의 한계]

- 비연결성

> 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송 (편지쓰는거랑 비슷)
>
> 클라이언트는 대상 서버가 패킷을 받을 수 있는 상태인지 모름. 만약 서버가 꺼져있다면 못받는것

- 비신뢰성

> 중간에 패킷이 사라지면? 
>
> 인터넷망 사이에서의 문제로 인해 패킷 소실
>
> 패킷이 순서대로 도착하지 않으면? 
>
> 패킷의 용량이 너무 크면 끊어서 보냄 (주로 1500byte 단위로), 클라이언트가 의도한 순서대로 서버에 도착하지 않을 수 있음

- 프로그램 구분

> 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면?



위 한계를 해결하기 위해 TCP, UDP를 알아야함!



***



### TCP, UDP

#### [인터넷 프로토콜 스택의 4계층]

  애플리케이션   계  층           :       HTTP, FTP

​    전  송           계   층           :       TCP, UDP

​    인  터  넷     계   층            :        IP

네트워크 인터페이스 계층      :        (LAN카드 등등)

*모든 개발자를 위한 HTTP 웹-네트워크 by 김영한 자료 25page 사진 참고*

> 대략적으로 위 과정을 거쳐 데이터가 전송됨
>
> 그림에서 볼 수 있듯 데이터 가장 바깥쪽(Ethernet frame을 제외한)은 IP패킷 으로, 그 안에는 TCP/IP로 전송할 데이터를 감싼다.
>
> IP 패킷 : 출발지 IP, 목적지 IP (쉽게말해 택배 박스)
>
> TCP/IP : 출발지 PORT, 목적지 PORT, 전송제어, 순서, 검증정보 등등 (이러한 정보로 위에 IP의 한계점들이 해결이 됨)



#### [TCP의 특징]

> 전송 제어 프로토콜(Transmission Control Protocol)

- 연결지향 - TCP 3 way handshake (가상 연결)        **(비연결성 문제 해결)**

> 1. SYN (클라이언트 → 서버) 
> 2. SYN + ACK (서버 → 클라이언트)
> 3. ACK (클라이언트 → 서버) 
> 4. 데이터 전송 (클라이언트 → 서버) 
>
> 위 과정을 통해 서로에 대한 신뢰가 생김 (위 과정은 물리적 연결이 아니고 논리적으로 연결되었다고 표현함)
>
> SYN : 접속 요청 / ACK : 요청 수락 (참고: 3. ACK와 함께 데이터 전송 가능)

- 데이터 전달 보증  **(비신뢰성 문제 해결)**

> 1. 데이터 전송 (클라이언트 → 서버) 
> 2. 데이터 잘 받았음 (서버 → 클라이언트)

- 순서 보장  **(비신뢰성 문제 해결)**

> 1. 패킷1, 패킷2, 패킷3 순서로 전송 (클라이언트 → 서버) 
> 2. 패킷1, 패킷3, 패킷2 순서로 도착
> 3. 패킷2 부터 다시 보내 (서버 → 클라이언트)



- 신뢰할 수 있는 프로토콜

> 위 과정이 그냥 되는 것은 아니고 위에 설명해놨듯이 TCP에는 출발지 PORT, 목적지 PORT, **전송제어, 순서, 검증정보** 등등 이 있기 때문에 가능

- 현재는 대부분 TCP 사용



#### [UDP의 특징]

> 사용자 데이터그램 프로토콜 (User Datagram Protocol)



- 하얀 도화지에 비유 (기능 거의 X)
- 연결지향 - TCP 3 way handshake X
- 데이터 전달 보증 X
- 순서 보장 X

> 위 세가지 과정이 시간이 오래걸림. TCP를 바꿀 수 없으니 UDP를 이용하여 애플리케이션에서 가공하면 좋음

- 데이터 전달 및 순서가 보장되지 않지만, **단순하고 빠름**
- 정리

> **IP와 거의 같다.** +PORT(하나의 IP에서 여러 애플리케이션이 실행중일때 어디에 필요한 데이터인지 구분하는) +체크섬 정도만 추가
>
> 애플리케이션에서 추가 작업 필요



***



### PORT 

> 직역하면 항구

한번에 둘 이상 연결하려면??

IP로 패킷으로 날아올텐데 그게 어떤 애플리케이션에 필요한 패킷인지 알수가 없음

**TCP를 보면 PORT정보를 보내는데 이를 통해 어떤 애플리케이션에 필요한 패킷인지 알 수 있음!**

- 0~65535 할당 가능
- 0~1023 : 잘 알려진 포트, 사용하지 않는 것이 좋음

> - FTP - 20, 21
> - TELNET - 23
> - HTTP - 80
> - HTTPS - 443



***



### DNS

> 도메인 네임 시스템 (Domain Name System)
>
> (IP는 기억하기 어렵다. / IP는 변경될 수 있다.) 는 문제점 해결
>
> - 전화번호부 같은 개념 (중간에 전화번호부같은 서버(DNS서버)를 제공)
> - 도메인 명을 IP주소로 변환



